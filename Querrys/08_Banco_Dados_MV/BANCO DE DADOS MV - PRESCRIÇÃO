ðŸ§© CatÃ¡logo Expandido â€” Banco de Dados MV (PrescriÃ§Ã£o e Auditoria de Antimicrobianos)
ðŸ—‚ï¸ 1. Tabela PACIENTE

FunÃ§Ã£o: armazena os dados cadastrais dos pacientes.

Campo	Tipo	DescriÃ§Ã£o
CD_PACIENTE	NUMBER(10)	Identificador Ãºnico do paciente (PK).
NM_PACIENTE	VARCHAR2(120)	Nome completo do paciente.
DT_NASCIMENTO	DATE	Data de nascimento.
TP_SEXO	CHAR(1)	Sexo: 'M' (masculino) ou 'F' (feminino).
NR_PRONTUARIO	VARCHAR2(20)	NÃºmero do prontuÃ¡rio hospitalar.
CD_CONVENIO	NUMBER	ConvÃªnio associado.
CD_PESSOA_FISICA	NUMBER	Relacionamento com cadastro geral de pessoas.

ðŸ”— Relacionamentos:

1:N com ATENDIME â†’ (PACIENTE.CD_PACIENTE = ATENDIME.CD_PACIENTE)

ðŸ¥ 2. Tabela ATENDIME

FunÃ§Ã£o: identifica cada internaÃ§Ã£o, pronto-atendimento ou episÃ³dio de cuidado.

Campo	Tipo	DescriÃ§Ã£o
CD_ATENDIMENTO	NUMBER(10)	CÃ³digo Ãºnico do atendimento (PK).
CD_PACIENTE	NUMBER(10)	FK para PACIENTE.
HR_ATENDIMENTO	DATE	Data/hora da admissÃ£o.
DT_ALTA	DATE	Data de alta mÃ©dica.
CD_UNID_INT	NUMBER	Unidade de internaÃ§Ã£o.
CD_LEITO	NUMBER	CÃ³digo do leito ocupado.
CD_CID	VARCHAR2(10)	CID principal do episÃ³dio.
CD_ESPECIALID	NUMBER	Especialidade mÃ©dica responsÃ¡vel.

ðŸ”— Relacionamentos:

1:N com PRESCRICAO

1:1 com UNID_INT

1:N com ITPRE_MED (via prescriÃ§Ã£o)

ðŸ’Š 3. Tabela PRESCRICAO

FunÃ§Ã£o: representa o conjunto de medicamentos e condutas prescritas em determinado momento.

Campo	Tipo	DescriÃ§Ã£o
CD_PRESCRICAO	NUMBER(10)	Identificador da prescriÃ§Ã£o (PK).
CD_ATENDIMENTO	NUMBER(10)	FK para ATENDIME.
DT_PRESCRICAO	DATE	Data e hora da prescriÃ§Ã£o.
CD_USUARIO	NUMBER(10)	FK para o mÃ©dico prescritor.
SN_LIBERADA	CHAR(1)	Indica se a prescriÃ§Ã£o foi liberada ('S'/'N').
CD_TIP_PRESC	NUMBER	Tipo da prescriÃ§Ã£o (inicial, evoluÃ§Ã£o, suspensÃ£o).
OBS_PRESCRICAO	VARCHAR2(500)	ObservaÃ§Ãµes gerais do mÃ©dico.

ðŸ”— Relacionamentos:

1:N com ITPRE_MED

1:1 com USU_MEDICO

1:N com PRES_MED_AUDIT (indiretamente, via itens)

ðŸ’‰ 4. Tabela ITPRE_MED

FunÃ§Ã£o: armazena cada item da prescriÃ§Ã£o (medicamentos, soluÃ§Ãµes, etc.).

Campo	Tipo	DescriÃ§Ã£o
CD_ITPRE_MED	NUMBER(10)	Identificador Ãºnico do item (PK).
CD_PRESCRICAO	NUMBER(10)	FK para PRESCRICAO.
CD_PRODUTO	NUMBER(10)	FK para PRODUTO.
DOSE	NUMBER(10,2)	Dose numÃ©rica.
CD_UNID_DOSE	VARCHAR2(10)	Unidade de dose (mg, g, mL).
FREQUENCIA	VARCHAR2(20)	Intervalo entre administraÃ§Ãµes (ex: â€œ8/8hâ€).
CD_VIA	NUMBER	FK para via de administraÃ§Ã£o (VO, EV, IM, etc.).
SN_SUSPENSO	CHAR(1)	â€˜Sâ€™ se o item foi suspenso.
DT_INICIO	DATE	InÃ­cio do uso.
DT_FIM	DATE	Fim do uso (se suspenso).

ðŸ”— Relacionamentos:

N:1 com PRESCRICAO

1:1 com PRODUTO

1:1 com ITPRE_MED_HIST

1:1 com PRES_MED_AUDIT

ðŸ§¬ 5. Tabela PRODUTO

FunÃ§Ã£o: catÃ¡logo mestre de medicamentos e insumos.

Campo	Tipo	DescriÃ§Ã£o
CD_PRODUTO	NUMBER(10)	CÃ³digo do produto (PK).
DS_PRODUTO	VARCHAR2(200)	Nome comercial ou genÃ©rico do medicamento.
CD_GRUPO	NUMBER	Grupo terapÃªutico.
CD_SUBGRUPO	NUMBER	Subcategoria.
CD_CLASSE_TERAPEUTICA	NUMBER	Classe farmacolÃ³gica.
DS_FORMA_FARMACEUTICA	VARCHAR2(100)	Forma farmacÃªutica (EV, VO, PO, etc.).
SN_ANTIMICROBIANO	CHAR(1)	Indica se Ã© antimicrobiano (custom).

ðŸ”— Relacionamentos:

1:N com ITPRE_MED

ðŸ§¾ 6. Tabela PRES_MED_AUDIT (ou AUDIT_ATB)

FunÃ§Ã£o: registra auditorias realizadas sobre antimicrobianos.

Campo	Tipo	DescriÃ§Ã£o
CD_AUDITORIA	NUMBER(10)	Identificador (PK).
CD_ITPRE_MED	NUMBER(10)	FK para item auditado.
DT_AUDITORIA	DATE	Data e hora da auditoria.
CD_AUDITOR	NUMBER	Infectologista responsÃ¡vel.
JUSTIFICATIVA	VARCHAR2(500)	Motivo do uso do antimicrobiano.
PARECER_INFECTO	VARCHAR2(100)	Parecer do infectologista (â€œAprovadoâ€, â€œSuspenderâ€, etc.).
DURACAO_SUGERIDA	NUMBER(3)	NÃºmero de dias de tratamento sugerido.
CD_STATUS	NUMBER	Status (em anÃ¡lise, aprovado, suspenso).

ðŸ”— Relacionamentos:

1:1 com ITPRE_MED

1:1 com USU_MEDICO (via CD_AUDITOR)

ðŸ§‘â€âš•ï¸ 7. Tabela USU_MEDICO

FunÃ§Ã£o: cadastro de mÃ©dicos e prescritores.

Campo	Tipo	DescriÃ§Ã£o
CD_USUARIO	NUMBER(10)	Identificador do mÃ©dico (PK).
NM_USUARIO	VARCHAR2(100)	Nome completo.
CRM	VARCHAR2(20)	Registro no CRM.
CD_ESPECIALID	NUMBER	Especialidade mÃ©dica.
SN_ATIVO	CHAR(1)	Se estÃ¡ ativo no sistema.

ðŸ”— Relacionamentos:

1:N com PRESCRICAO

1:N com PRES_MED_AUDIT

ðŸ¨ 8. Tabela UNID_INT

FunÃ§Ã£o: descreve unidades hospitalares (UTI, enfermaria, etc.)

Campo	Tipo	DescriÃ§Ã£o
CD_UNID_INT	NUMBER(10)	CÃ³digo da unidade (PK).
DS_UNID_INT	VARCHAR2(100)	Nome da unidade (UTI TÃ©rreo 1, UTI G1 etc.).
TP_UNIDADE	VARCHAR2(20)	Tipo (UTI, ENF, PS).
SN_ATIVO	CHAR(1)	Indica se a unidade estÃ¡ ativa.

ðŸ”— Relacionamentos:

1:N com ATENDIME

ðŸ”— 9. Diagrama Relacional Simplificado (texto)
PACIENTE (1)â”€â”€â”€(N) ATENDIME (1)â”€â”€â”€(N) PRESCRICAO (1)â”€â”€â”€(N) ITPRE_MED (1)â”€â”€â”€(1) PRODUTO
                                                        â”‚
                                                        â”œâ”€â”€(1) ITPRE_MED_HIST
                                                        â””â”€â”€(1) PRES_MED_AUDIT â”€â”€(1) USU_MEDICO
                                                                 â”‚
                                                                 â””â”€â”€(1) ATENDIME â†’ UNID_INT

âš™ï¸ 10. Fluxo de Dados â€” Processo de PrescriÃ§Ã£o e Auditoria

O paciente Ã© admitido â†’ registro em ATENDIME.

O mÃ©dico prescreve â†’ nova linha em PRESCRICAO.

Cada item prescrito â†’ armazenado em ITPRE_MED (um para cada medicamento).

O sistema vincula o produto â†’ PRODUTO, permitindo identificar antimicrobianos.

Infectologia audita â†’ registro em PRES_MED_AUDIT.

HistÃ³rico de alteraÃ§Ãµes â†’ controlado por ITPRE_MED_HIST.

Consultas e dashboards cruzam PACIENTE, ATENDIME, PRESCRICAO, ITPRE_MED, PRODUTO, PRES_MED_AUDIT e UNID_INT.

ðŸ“Š 11. SugestÃ£o de Query-Matriz para Auditoria de Antimicrobianos

Consulta consolidada (usada em dashboards, Power BI ou portlet MV):

SELECT
    p.nm_paciente,
    TRUNC(MONTHS_BETWEEN(SYSDATE, p.dt_nascimento) / 12) AS idade,
    a.cd_atendimento,
    ui.ds_unid_int AS unidade,
    pr.dt_prescricao,
    u.nm_usuario AS prescritor,
    prod.ds_produto AS antimicrobiano,
    itm.dose || ' ' || itm.cd_unid_dose AS dose,
    itm.frequencia,
    itm.dt_inicio,
    itm.dt_fim,
    aud.parecer_infecto,
    aud.justificativa,
    aud.duracao_sugerida
FROM dbamv.itpre_med itm
JOIN dbamv.prescricao pr ON itm.cd_prescricao = pr.cd_prescricao
JOIN dbamv.atendime a ON pr.cd_atendimento = a.cd_atendimento
JOIN dbamv.paciente p ON a.cd_paciente = p.cd_paciente
JOIN dbamv.produto prod ON itm.cd_produto = prod.cd_produto
LEFT JOIN dbamv.pres_med_audit aud ON itm.cd_itpre_med = aud.cd_itpre_med
JOIN dbamv.usu_medico u ON pr.cd_usuario = u.cd_usuario
JOIN dbamv.unid_int ui ON a.cd_unid_int = ui.cd_unid_int
WHERE prod.ds_produto IN ('MEROPENEM', 'VANCOMICINA', 'CEFEPIME', 'LINEZOLIDA')
AND pr.dt_prescricao >= TRUNC(SYSDATE - 3)
ORDER BY a.cd_atendimento, pr.dt_prescricao DESC;
